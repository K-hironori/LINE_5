name: Deploy to Xserver

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Deploy to Xserver via FTP
      run: |
        curl -T index.html \
             ftp://sv16565.xserver.jp/public_html/ \
             --user xs842747:${{ secrets.FTP_PASSWORD }} \
             --ftp-create-dirs \
             --connect-timeout 30 \
             --max-time 300 \
             --retry 3 \
             --retry-delay 10